import pkg from '../package.json'
import buble from 'rollup-plugin-buble'
import alias from 'rollup-plugin-alias'
import commonjs from 'rollup-plugin-commonjs'
import nodeResolve from 'rollup-plugin-node-resolve'
import istanbul from 'rollup-plugin-istanbul'
import { resolve } from 'path'

export default {
  plugins: [
    alias({ [pkg.name]: resolve('./src/index') }),
    nodeResolve(),
    commonjs(),
    buble({transforms: { modules: false }}),
    istanbul({ include: ['src/**/*.js'] })
  ],
  input: 'test/index.js',
  output: { sourcemap: true, file: 'tmp/test.js', format: 'iife' }
}
