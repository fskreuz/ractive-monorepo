import { toParts, toModule, replaceExtension } from '@ractivejs/utils-component'

export const translate = load => {
  const srcName = load.name.split('!').shift()
  const destName = replaceExtension(srcName, '.js')
  const parts = toParts(load.source)
  const { code, map } = toModule({ srcName, destName, parts })

  load.metadata.sourceMap = map

  return code
}
